<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Preview do Modelo | Vorniweb</title>

<style>
  :root {
    --bg: #F3F4F6;
    --deep-blue: #1E3A8A;
    --deep-blue-hover: #162f6b;
    --card: #FFFFFF;
    --radius: 10px;
    --shadow: 0 3px 12px rgba(30, 58, 138, 0.25);
    --muted: #6B7280;
    --primary: #1E3A8A;
    --primary-hover: #162f6b;
  }

  body {
    margin: 0;
    background: var(--bg);
    font-family: Inter, sans-serif;
  }

  /* HEADER */
  .preview-header {
    background: var(--card);
    padding: 14px 18px;
    box-shadow: var(--shadow);
    position: relative;
    z-index: 10;
  }
  .preview-header strong {
    font-size: 1.05rem;
  }

  /* IFRAME */
  iframe {
    width: 100%;
    height: calc(100vh - 68px);
    border: none;
    background: white;
  }

  /* BOT√ïES FLUTUANTES */
  .choose-btn,
  .return-btn {
    position: fixed;
    bottom: 24px;
    padding: 14px 22px;
    background: var(--primary);
    color: white;
    font-weight: bold;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    cursor: pointer;
    border: none;
    text-decoration: none;
    transition: transform 0.2s ease, background 0.2s ease;
    z-index: 20;
  }

  .choose-btn:hover,
  .return-btn:hover {
    transform: scale(1.06);
    background: var(--primary-hover);
  }

  /* Posicionamento */
  .choose-btn {
    right: 24px;
  }
  .return-btn {
    left: 24px;
  }

  /* Fallback se o modelo n√£o existir */
  .error-box {
    text-align: center;
    padding: 40px;
    color: var(--muted);
  }

  /* BOT√ïES FLUTUANTES ‚Äî unificados */
.action-btn {
  position: fixed;
  padding: 10px 18px;
  font-size: 0.9rem; 
  bottom: 18px;
  background: var(--primary);
  color: white;
  font-weight: bold;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  cursor: pointer;
  border: none;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s ease, background 0.2s ease;
  z-index: 20;
}
.action-btn:hover {
  transform: scale(1.04); 
  background: var(--primary-hover);
}
.action-btn.return {
  left: 18px; 
}
.action-btn.choose {
  right: 18px; 
}
</style>
</head>

<body>

  <div class="preview-header">
    <strong id="modelName">Carregando modelo...</strong>
  </div>

  <div id="preview-area"></div>

  <!-- Bot√µes flutuantes -->
  <a href="./index.html#modelos" class="action-btn return">Voltar para modelos</a>
  <button class="action-btn choose" id="chooseBtn">Quero este modelo</button>
  

</body>
<script>

  /* ============================================================
   VORNINWEB ‚Äî Preview de Modelos
   ============================================================ */

// 1Ô∏è‚É£ Captura o par√¢metro da URL (?modelo=...)
const params = new URLSearchParams(window.location.search);
const modelo = params.get("modelo");

const previewArea = document.getElementById("preview-area");
const modelName = document.getElementById("modelName");

// 2Ô∏è‚É£ Define o caminho base (funciona local e no GitHub Pages)
const repoName = "VORINWEB"; // nome exato do reposit√≥rio no GitHub
const basePath = window.location.hostname.includes("github.io")
  ? `/${repoName}`
  : "";

// 3Ô∏è‚É£ Fun√ß√£o para exibir erro de modelo n√£o encontrado
function showError() {
  previewArea.innerHTML = `
    <div class="error-box">
      <h2>Modelo n√£o encontrado üòï</h2>
      <p>Volte e escolha um modelo novamente.</p>
    </div>
  `;
  modelName.textContent = "Modelo inv√°lido";
}

// 4Ô∏è‚É£ Carrega o modelo no iframe
function loadModel(modelNameParam) {
  if (!modelNameParam) {
    showError();
    return;
  }

  const nomeFormatado =
    modelNameParam.replaceAll("-", " ").replace(/\b\w/g, c => c.toUpperCase());

  modelName.textContent = nomeFormatado;

  const iframe = document.createElement("iframe");
  iframe.src = `${basePath}/modelos/${modelNameParam}/index.html`;
  iframe.loading = "lazy";

  // feedback de carregamento
  iframe.onload = () =>
    console.log(`‚úÖ Modelo carregado com sucesso: ${modelNameParam}`);

  iframe.onerror = () => {
    console.error(`‚ùå Erro ao carregar modelo: ${modelNameParam}`);
    showError();
  };

  previewArea.appendChild(iframe);
}

// 5Ô∏è‚É£ Bot√£o ‚ÄúQuero este modelo‚Äù
function setupWhatsAppButton() {
  const btn = document.getElementById("chooseBtn");
  if (!btn) return;

  btn.addEventListener("click", () => {
    const numero = "5511934900204";
    const nomeFormatado =
      modelo?.replaceAll("-", " ").replace(/\b\w/g, c => c.toUpperCase()) ||
      "modelo desconhecido";

    const msg = encodeURIComponent(
      `Ol√°! Gostaria de solicitar o modelo: *${nomeFormatado}*`
    );

    window.open(`https://wa.me/${numero}?text=${msg}`, "_blank");
  });
}

// 6Ô∏è‚É£ Inicializa√ß√£o geral
function initPreview() {
  if (!modelo) {
    showError();
  } else {
    loadModel(modelo);
    setupWhatsAppButton();
  }
}

document.addEventListener("DOMContentLoaded", initPreview);
</script>